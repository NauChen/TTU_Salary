var dataset_userList = [
    {
        'id': '21',
        'createDate': "2024-04-25",
        'name': "王小明",
        'userId': "abc@gmail.com",
        'type': "個人",
        'editBy': "-",
        'adminNote': '2024-07-31到職',
    },
    {
        'id': '1',
        'createDate': "2024-07-25",
        'name': "南方科技有限公司",
        'userId': "23456780",
        'type': "商號",
        'editBy': "張小麵",

        'companyDescription': "專業提供高科技產品製造與銷售",
        'creationDate': "2010-12-03",
        'capitalAmount': "5,678,000",
        'employeesNum': "120",
        'responsiblePerson': "王大明",
        'referrer': "李小美",
        'phone': "02-87654321",
        'lineId': "nftech123",
        'contactPerson': "張小華",
        'ext': "1234",
        'jobTitle': "製造總監",
        'companyAdd': "台北市中山區中山北路100號",
        'locationOfCompany': "台北市信義區信義路200號",
        'helpItems': "提升製造效率、品質控制",
        'companyProof': "2024010101A1.pdf",
        'memoUpload': "2024010101B1.pdf",
        'consentDoc': "2024010101C1.pdf",
        'businessProof': "2024010101D1.pdf",
        'planUpload': "2024010101E1.pdf",
        'entryForm': "2024010101F1.pdf",
        'companyEmail': "abc@gmail.com",
        'tutoringProfessor': '黃飛鴻',
        'nurtureProgram': '中國傳統武術發揚光大',
        'adminNote': '副業：十三姨古典洋裝',
    },
    {
        'id': '2',
        'createDate': "2011-06-30",
        'name': "東方電子股份有限公司",
        'userId': "83456780",
        'type': "商號",
        'editBy': "李小包",

        'companyDescription': "專業從事電子產品設計與製造",
        'creationDate': "2005-04-15",
        'capitalAmount': "12,345,000",
        'employeesNum': "300",
        'responsiblePerson': "陳小明",
        'referrer': "王大力",
        'phone': "02-86543210",
        'lineId': "eastern123",
        'contactPerson': "林小玲",
        'ext': "5678",
        'jobTitle': "研發總監",
        'companyAdd': "新北市板橋區文化路300號",
        'locationOfCompany': "新北市新店區中正路500號",
        'helpItems': "產品設計、市場拓展",
        'companyProof': "2024010102A1.pdf",
        'memoUpload': "2024010102B1.pdf",
        'consentDoc': "2024010102C1.pdf",
        'businessProof': "2024010102D1.pdf",
        'planUpload': "2024010102E1.pdf",
        'entryForm': "2024010102F1.pdf",
        'companyEmail': "bcd@gmail.com",
        'tutoringProfessor': '黃飛鴻',
        'nurtureProgram': '中國傳統武術發揚光大',
        'adminNote': '副業：十三姨古典洋裝',
    },
    {
        'id': '23',
        'createDate': "2012-03-29",
        'name': "孫小美",
        'userId': "efg@gmail.com",
        'type': "神秘客",
        'status': "停用",
        'editBy': "-",
        'adminNote': '2011-07-31到職',
    },
    {
        'id': '3',
        'createDate': "2009-01-12",
        'name': "中華服飾有限公司",
        'type': "商號",
        'userId': "53456780",
        'editBy': "周小吐",

        'companyDescription': "專業生產高質素服飾產品",
        'creationDate': "2001-11-20",
        'capitalAmount': "8,900,000",
        'employeesNum': "250",
        'responsiblePerson': "張小華",
        'referrer': "李小美",
        'phone': "02-81234567",
        'lineId': "zhonghua456",
        'contactPerson': "王大志",
        'ext': "4321",
        'jobTitle': "行銷經理",
        'companyAdd': "台中市西區民權路700號",
        'locationOfCompany': "台中市北區三民路800號",
        'helpItems': "市場拓展、品牌建立",
        'companyProof': "2024010103A1.pdf",
        'memoUpload': "2024010103B1.pdf",
        'consentDoc': "2024010103C1.pdf",
        'businessProof': "2024010103D1.pdf",
        'planUpload': "2024010103E1.pdf",
        'entryForm': "2024010103F1.pdf",
        'companyEmail': "cde@gmail.com",
        'tutoringProfessor': '黃飛鴻',
        'nurtureProgram': '中國傳統武術發揚光大',
        'adminNote': '副業：十三姨古典洋裝',
    },
    {
        'id': '4',
        'createDate': "2012-03-29",
        'name': "星際科技股份有限公司",
        'type': "商號",
        'userId': "63456780",
        'editBy': "藍小司",

        'companyDescription': "專業提供航太科技產品解決方案",
        'creationDate': "2007-08-10",
        'capitalAmount': "15,600,000",
        'employeesNum': "180",
        'responsiblePerson': "劉大同",
        'referrer': "林小美",
        'phone': "02-80123456",
        'lineId': "stellar789",
        'contactPerson': "陳小菁",
        'ext': "6789",
        'jobTitle': "技術總監",
        'companyAdd': "台南市東區東門路900號",
        'locationOfCompany': "台南市南區南門路1000號",
        'helpItems': "技術開發、市場推廣",
        'companyProof': "2024010104A1.pdf",
        'memoUpload': "2024010104B1.pdf",
        'consentDoc': "2024010104C1.pdf",
        'businessProof': "2024010104D1.pdf",
        'planUpload': "2024010104E1.pdf",
        'entryForm': "2024010104F1.pdf",
        'companyEmail': "def@gmail.com",
        'tutoringProfessor': '黃飛鴻',
        'nurtureProgram': '中國傳統武術發揚光大',
        'adminNote': '副業：十三姨古典洋裝',
    },
    {
        'id': '5',
        'createDate': "2008-11-28",
        'name': "綠意生活有限公司",
        'type': "商號",
        'userId': "83456780",
        'editBy': "-",

        'companyDescription': "專業提供生態友善產品與服務",
        'creationDate': "2004-05-06",
        'capitalAmount': "6,700,000",
        'employeesNum': "150",
        'responsiblePerson': "林小明",
        'referrer': "-",
        'phone': "02-87891234",
        'lineId': "greenlife234",
        'contactPerson': "陳小華",
        'ext': "8901",
        'jobTitle': "營運經理",
        'companyAdd': "桃園市中壢區中正路1100號",
        'locationOfCompany': "桃園市龜山區文化路1200號",
        'helpItems': "生態保護計畫、社會企業發展",
        'companyProof': "2024010105A1.pdf",
        'memoUpload': "2024010105B1.pdf",
        'consentDoc': "2024010105C1.pdf",
        'businessProof': "2024010105D1.pdf",
        'planUpload': "2024010105E1.pdf",
        'entryForm': "2024010105F1.pdf",
        'companyEmail': "efg@gmail.com",
        'tutoringProfessor': '黃飛鴻',
        'nurtureProgram': '中國傳統武術發揚光大',
        'adminNote': '副業：十三姨古典洋裝',
    },
    {
        'id': '6',
        'createDate': "2022-10-15",
        'name': "晟霖實業股份有限公司",
        'type': "商號",
        'userId': "63456780",
        'editBy': "-",

        'companyDescription': "專精於工業機械設備製造與銷售",
        'creationDate': "1998-04-20",
        'capitalAmount': "1,230,000",
        'employeesNum': "268",
        'responsiblePerson': "陳明華",
        'referrer': "蔡佳玲",
        'phone': "02-86712345",
        'lineId': "shenglin123",
        'contactPerson': "林美玲",
        'ext': "1234",
        'jobTitle': "行政經理",
        'companyAdd': "台北市中山區復興北路100號",
        'locationOfCompany': "台北市信義區忠孝東路四段200號",
        'helpItems': "生產製造流程優化",
        'companyProof': "2024010101A1.pdf",
        'memoUpload': "2024010101B1.pdf",
        'consentDoc': "2024010101C1.pdf",
        'businessProof': "2024010101D1.pdf",
        'planUpload': "2024010101E1.pdf",
        'entryForm': "2024010101F1.pdf",
        'companyEmail': "fgh@gmail.com",
        'tutoringProfessor': '黃飛鴻',
        'nurtureProgram': '中國傳統武術發揚光大',
        'adminNote': '副業：十三姨古典洋裝',
    },
    {
        'id': '7',
        'createDate': "2022-03-20",
        'name': "德昌企業有限公司",
        'type': "商號",
        'userId': "63453780",
        'editBy': "-",

        'companyDescription': "專業提供電子零件設計與製造服務",
        'creationDate': "2005-09-12",
        'capitalAmount': "980,000",
        'employeesNum': "153",
        'responsiblePerson': "王大明",
        'referrer': "張小芳",
        'phone': "02-86723456",
        'lineId': "techcorp456",
        'contactPerson': "張美麗",
        'ext': "5678",
        'jobTitle': "技術總監",
        'companyAdd': "台北市南港區園區二路75號",
        'locationOfCompany': "新北市中和區民富街三段90號",
        'helpItems': "新產品開發與市場推廣",
        'companyProof': "2024010102A1.pdf",
        'memoUpload': "2024010102B1.pdf",
        'consentDoc': "2024010102C1.pdf",
        'businessProof': "2024010102D1.pdf",
        'planUpload': "2024010102E1.pdf",
        'entryForm': "2024010102F1.pdf",
        'companyEmail': "ghi@gmail.com",
        'tutoringProfessor': '黃飛鴻',
        'nurtureProgram': '中國傳統武術發揚光大',
        'adminNote': '副業：十三姨古典洋裝',
    },
    {
        'id': '8',
        'createDate': "2023-05-12",
        'name': "嘉強貿易股份有限公司",
        'type': "商號",
        'userId': "63456780",
        'editBy': "-",

        'companyDescription': "專注於進口與銷售高品質農產品",
        'creationDate': "2010-11-28",
        'capitalAmount': "750,000",
        'employeesNum': "87",
        'responsiblePerson': "黃小強",
        'referrer': "吳美惠",
        'phone': "02-86734567",
        'lineId': "strongtrade67",
        'contactPerson': "吳美玲",
        'ext': "6789",
        'jobTitle': "市場經理",
        'companyAdd': "台北市大安區仁愛路三段150號",
        'locationOfCompany': "新北市板橋區文化路一段200號",
        'helpItems': "市場拓展與品牌推廣",
        'companyProof': "2024010103A1.pdf",
        'memoUpload': "2024010103B1.pdf",
        'consentDoc': "2024010103C1.pdf",
        'businessProof': "2024010103D1.pdf",
        'planUpload': "2024010103E1.pdf",
        'entryForm': "2024010103F1.pdf",
        'companyEmail': "hij@gmail.com",
        'tutoringProfessor': '黃飛鴻',
        'nurtureProgram': '中國傳統武術發揚光大',
        'adminNote': '副業：十三姨古典洋裝',
    },
    {
        'id': '9',
        'createDate': "2024-02-28",
        'name': "百傑科技有限公司",
        'type': "商號",
        'userId': "63443780",
        'editBy': "-",

        'companyDescription': "專業提供IT解決方案及服務",
        'creationDate': "2013-08-05",
        'capitalAmount': "1,500,000",
        'employeesNum': "312",
        'responsiblePerson': "劉文傑",
        'referrer': "張美玲",
        'phone': "02-86745678",
        'lineId': "besttech78",
        'contactPerson': "張小華",
        'ext': "3456",
        'jobTitle': "營運總監",
        'companyAdd': "台北市中正區羅斯福路一段50號",
        'locationOfCompany': "新北市新店區安和路二段300號",
        'helpItems': "系統開發與IT架構設計",
        'companyProof': "2024010104A1.pdf",
        'memoUpload': "2024010104B1.pdf",
        'consentDoc': "2024010104C1.pdf",
        'businessProof': "2024010104D1.pdf",
        'planUpload': "2024010104E1.pdf",
        'entryForm': "2024010104F1.pdf",
        'companyEmail': "ijk@gmail.com",
        'tutoringProfessor': '黃飛鴻',
        'nurtureProgram': '中國傳統武術發揚光大',
        'adminNote': '副業：十三姨古典洋裝',
    },
    {
        'id': '10',
        'createDate': "2023-11-10",
        'name': "全新文創有限公司",
        'type': "商號",
        'userId': "22443780",
        'editBy': "-",

        'companyDescription': "專注於文化創意產品開發與設計",
        'creationDate': "2018-06-22",
        'capitalAmount': "480,000",
        'employeesNum': "45",
        'responsiblePerson': "陳美惠",
        'referrer': "王小明",
        'phone': "02-86756789",
        'lineId': "creativexyz89",
        'contactPerson': "王大春",
        'ext': "4567",
        'jobTitle': "設計總監",
        'companyAdd': "台北市中山區民生東路三段80號",
        'locationOfCompany': "新北市三重區重新路四段500號",
        'helpItems': "產品設計與品牌推廣",
        'companyProof': "2024010105A1.pdf",
        'memoUpload': "2024010105B1.pdf",
        'consentDoc': "2024010105C1.pdf",
        'businessProof': "2024010105D1.pdf",
        'planUpload': "2024010105E1.pdf",
        'entryForm': "2024010105F1.pdf",
        'companyEmail': "jkl@gmail.com",
        'tutoringProfessor': '黃飛鴻',
        'nurtureProgram': '中國傳統武術發揚光大',
        'adminNote': '副業：十三姨古典洋裝',
    },
    {
        'id': '11',
        'createDate': "2024-01-18",
        'name': "宏達國際有限公司",
        'type': "商號",
        'userId': "52443780",
        'editBy': "-",

        'companyDescription': "專注於智慧型手機與通訊設備開發與製造",
        'creationDate': "2000-07-10",
        'capitalAmount': "1,800,000",
        'employeesNum': "380",
        'responsiblePerson': "王大明",
        'referrer': "張小華",
        'phone': "02-86778901",
        'lineId': "htcmobile901",
        'contactPerson': "張美玲",
        'ext': "6789",
        'jobTitle': "營運總監",
        'companyAdd': "台北市信義區松仁路100號",
        'locationOfCompany': "新北市板橋區新站路一段200號",
        'helpItems': "市場拓展與品牌推廣",
        'companyProof': "2024010106A1.pdf",
        'memoUpload': "2024010106B1.pdf",
        'consentDoc': "2024010106C1.pdf",
        'businessProof': "2024010106D1.pdf",
        'planUpload': "2024010106E1.pdf",
        'entryForm': "2024010106F1.pdf",
        'companyEmail': "klm@gmail.com",
        'tutoringProfessor': '黃飛鴻',
        'nurtureProgram': '中國傳統武術發揚光大',
        'adminNote': '副業：十三姨古典洋裝',
    },
    {
        'id': '12',
        'createDate': "2023-09-25",
        'name': "美佳科技股份有限公司",
        'type': "商號",
        'userId': "11443780",
        'editBy': "-",

        'companyDescription': "專業提供多媒體播放器與數位音訊解決方案",
        'creationDate': "2010-03-15",
        'capitalAmount': "1,200,000",
        'employeesNum': "260",
        'responsiblePerson': "張小強",
        'referrer': "王大明",
        'phone': "02-86789012",
        'lineId': "mjktech012",
        'contactPerson': "王美玲",
        'ext': "8901",
        'jobTitle': "技術總監",
        'companyAdd': "台北市大安區敦化南路二段150號",
        'locationOfCompany': "新北市三重區中正北路三段300號",
        'helpItems': "產品技術升級與客戶支援",
        'companyProof': "2024010107A1.pdf",
        'memoUpload': "2024010107B1.pdf",
        'consentDoc': "2024010107C1.pdf",
        'businessProof': "2024010107D1.pdf",
        'planUpload': "2024010107E1.pdf",
        'entryForm': "2024010107F1.pdf",
        'companyEmail': "lmn@gmail.com",
        'tutoringProfessor': '黃飛鴻',
        'nurtureProgram': '中國傳統武術發揚光大',
        'adminNote': '副業：十三姨古典洋裝',
    },
    {
        'id': '13',
        'createDate': "2023-07-08",
        'name': "新光電子有限公司",
        'type': "商號",
        'userId': "11445380",
        'editBy': "新光電子有限公司",

        'companyDescription': "專業從事半導體元件設計與製造",
        'creationDate': "2005-11-30",
        'capitalAmount': "1,500,000",
        'employeesNum': "310",
        'responsiblePerson': "劉小明",
        'referrer': "陳大勇",
        'phone': "02-86790123",
        'lineId': "sunglight123",
        'contactPerson': "陳美華",
        'ext': "9012",
        'jobTitle': "研發主管",
        'companyAdd': "台北市中山區敬業三路200號",
        'locationOfCompany': "新北市永和區永利路四段400號",
        'helpItems': "技術研發與生產效率提升",
        'companyProof': "2024010108A1.pdf",
        'memoUpload': "2024010108B1.pdf",
        'consentDoc': "2024010108C1.pdf",
        'businessProof': "2024010108D1.pdf",
        'planUpload': "2024010108E1.pdf",
        'entryForm': "2024010108F1.pdf",
        'companyEmail': "mno@gmail.com",
        'tutoringProfessor': '黃飛鴻',
        'nurtureProgram': '中國傳統武術發揚光大',
        'adminNote': '副業：十三姨古典洋裝',
    }
];

$(function () {

    $('#accountProfilesList').DataTable({
        ...commonSettingsTable,
        "data": dataset_userList,
        "columns": [
            { data: 'createDate', title: "建立日期", }, // 0
            { data: 'name', title: "使用者", }, // 1
            { data: 'userId', title: "登入帳號", }, // 2
            { data: 'type', title: "用戶類型", }, // 3
            { data: 'editBy', title: "最後改動者", }, // 4
            {
                data: 'id', title: "詳情", // 5
                render: function (data, type, row) {
                    let icon = "";
                    let modelId = "";
                    if (row.type === "商號") {
                        icon = '<i class="fa-solid fa-briefcase"></i>'
                        modelId = 'companyDetailModal'
                    } else {
                        modelId = 'personalDetailModal'
                        if (row.type === "個人") {
                            icon = '<i class="fa-solid fa-user"></i>'
                        } else {
                            icon = '<i class="fa-solid fa-skull"></i>'
                        }
                    }
                    return '<button type="button" class="btn btn-outline-primary btn-sm" data-bs-toggle="modal" data-bs-target="#' + modelId + '" data-id="' + data + '">' + icon + '</button>';
                }
            },
            {
                data: 'id', title: "修改", // 6
                render: function (data, type, row) {
                    linkPage = "";
                    if (row.type === "商號") {
                        linkPage = 'profilesEditCompany.html'
                    } else {
                        linkPage = 'profilesEditPersonal.html'
                    }
                    return '<a class="btn btn-outline-primary rounded-circle btn-sm oneWord" href="./' + linkPage + '?id=' + data + '"><i class="fa-solid fa-wrench"></i></a>';
                }
            },
            {
                data: 'id', title: "訪視<br class='d-none d-lg-block'>紀錄", // 7
                render: function (data, type, row) {
                    if (row.type === "商號") {
                        linkPage = 'profilesEditCompany.html'
                        // return '<a class="btn btn-outline-primary rounded-circle btn-sm oneWord" href="./profilesEditCompany.htm?id=' + data + '"><i class="fa-solid fa-user-secret"></i></a>';
                        return '<a class="btn btn-outline-primary rounded-circle btn-sm oneWord" href="./siteVisitReport.html?id=' + data + '"><i class="fa-solid fa-user-secret"></i></a>';
                    } else {
                        return '';
                    }
                }
            },
        ],
        order: [[0, 'desc']],
        "columnDefs": [
            {
                targets: [1],
                responsivePriority: 1,
            },
            {
                targets: [2],
                responsivePriority: 2,
            },
            { searchable: false, orderable: false, targets: [5, 6, 7] },
            { className: "text-nowrap", targets: [0, 2, 3] },
            { className: "text-lg-center", targets: [0, 3, 5, 6, 7] },
        ],
        createdRow: function (row, data, dataIndex) {
            [5, 6, 7].forEach(function (colIdx) {
                $('td:eq(' + colIdx + ')', row).css('max-width', '70px');
            });
            $('td:eq(3)', row).css('max-width', '100px');
        }
    });

    // 同步廠商燈箱顯示資料
    $('#companyDetailModal').on('show.bs.modal', function (event) {
        let button = $(event.relatedTarget);
        let thisCPId = String(button.data('id'));
        // console.log('thisCP Id:', thisCPId);
        let companyData = dataset_userList.find(company => company.id === thisCPId);
        if (companyData) {
            $('#companyName').text(companyData.name);
            $('#createDate').text(companyData.createDate);
            $('#companyDescription').text(companyData.companyDescription);
            $('#uniformNum').text(companyData.userId);
            $('#creationDate').text(companyData.creationDate);
            $('#capitalAmount').text(companyData.capitalAmount);
            $('#employeesNum').text(companyData.employeesNum);
            $('#responsiblePerson').text(companyData.responsiblePerson);
            $('#referrer').text(companyData.referrer);
            $('#phoneNum').text(companyData.phone);
            $('#companyEmail').text(companyData.companyEmail);
            $('#lineId').text(companyData.lineId);
            $('#contactPerson').text(companyData.contactPerson);
            $('#ext').text(companyData.ext);
            $('#jobTitle').text(companyData.jobTitle);
            $('#companyAdd').text(companyData.companyAdd);
            $('#locationOfCompany').text(companyData.locationOfCompany);
            $('#helpItems').text(companyData.helpItems);
            $('#tutoringProfessor').text(companyData.tutoringProfessor);
            $('#nurtureProgram').text(companyData.nurtureProgram);
            $('#adminNote').text(companyData.adminNote);
        } else {
            console.error('companyData data not found for id:', thisCPId);
        };
    });
    // 同步個人燈箱顯示資料
    $('#personalDetailModal').on('show.bs.modal', function (event) {
        let button = $(event.relatedTarget);
        let thisPSId = String(button.data('id'));
        // console.log('thisPS Id:', thisPSId);
        let personalData = dataset_userList.find(company => company.id === thisPSId);
        if (personalData) {
            $('#personal_Name').text(personalData.name);
            $('#personal_createDate').text(personalData.createDate);
            $('#personal_userName').text(personalData.userId);
            $('#personal_adminNote').text(personalData.adminNote);
        } else {
            console.error('personalData data not found for id:', thisPSId);
        };
    });

});