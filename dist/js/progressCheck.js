var dataset_progressCheck=[{id:"1",createDate:"2024-07-01",type:"汽車位",name:"孫小美",isReprint:"",isRenew:"續約",itemNum:"B1-01",paymentDate:"2024-07-07",status:"",remittanceFile:"20240710RF2"},{id:"2",createDate:"2024-06-15",type:"機車位",name:"孫中美",isReprint:"",isRenew:"",itemNum:"B2-05",paymentDate:"",status:"待補件。匯款證明",remittanceFile:"20240710RF1"},{id:"3",createDate:"2024-06-25",type:"識別證",name:"孫大美",isReprint:"補發",isRenew:"",itemNum:"AB0001",paymentDate:"2024-07-02",status:"通過",remittanceFile:"20240710RF3"},{id:"4",createDate:"2024-07-10",type:"汽車位",name:"王小明",isReprint:"",isRenew:"",itemNum:"",paymentDate:"",status:"不通過。使用者取消。",remittanceFile:""},{id:"5",createDate:"2024-07-03",type:"機車位",name:"陳美麗",isReprint:"",isRenew:"續約",itemNum:"B3-01",paymentDate:"2024-07-09",status:"已到帳，待審核",remittanceFile:"20240710RF2"},{id:"6",createDate:"2024-06-20",type:"識別證",name:"李美麗",isReprint:"",isRenew:"",itemNum:"",paymentDate:"2024-06-26",status:"通過",remittanceFile:"20240710RF1"},{id:"7",createDate:"2024-06-28",type:"培育室",name:"好棒棒股份有限公司",isReprint:"",isRenew:"續約",itemNum:"青創基地-301",paymentDate:"",status:"待補件。繳費證明",remittanceFile:"20240710RF5"}];$(function(){var e=session_userData;$("#company").val(e.company);let a=$("#progressCheckList").DataTable({...commonSettingsTable,data:dataset_progressCheck,columns:[{data:"id",title:'<i class="fa-regular fa-square-check"></i>',render:function(e,t,a,n){return'<input type="checkbox" class="form-check-input border-primary application-checkbox" value='+e+">"}},{data:"createDate",title:"申請日期"},{data:"name",title:"申請人姓名"},{data:"type",title:"項目"},{data:"itemNum",title:"項目註記",render:function(e,t,a){var n=a.isReprint,a=a.isRenew;return n||(a?a+"："+e:"-")}},{data:"paymentDate",title:"付帳日"},{data:"status",title:"審核進度"},{data:"id",title:"通知<br>匯款",render:function(e,t,a){return a.paymentDate?'<button type="button" class="btn btn-light rounded-circle remittance_voucher align_center reuploadRemittance" title="再次上傳匯款憑證" data-id="'+e+'"><i class="fa-solid fa-money-check-dollar"></i></button>':'<button type="button" class="btn btn-outline-primary rounded-circle remittance_voucher align_center uploadRemittance" title="上傳匯款憑證" data-bs-toggle="modal" data-bs-target="#remittanceModal" data-id="'+e+'"><i class="fa-solid fa-money-check-dollar"></i></button>'},className:"text-center text-nowrap"}],order:[[1,"desc"]],columnDefs:[{targets:[0],responsivePriority:1},{targets:[1],responsivePriority:2},{targets:[3],responsivePriority:3},{searchable:!1,orderable:!1,targets:[0,7]},{className:"text-center",targets:[0,1,3,5]},{className:"text-nowrap",targets:[0,1,2,3,4,5,6]}],createdRow:function(t,e,a){$("td:eq(8)",t).css("min-width","70px"),$("td:eq(6)",t).css("min-width","200px"),[1,5].forEach(function(e){$("td:eq("+e+")",t).css("min-width","130px").css("font-size",".95em")})}});$("#deleteTheseApplication").click(function(){let t=[];a.rows().every(function(){var e=this.node();$(e).find(".application-checkbox").prop("checked")&&(e=this.data(),t.push(e.id))}),0===t.length?swalToastWarning("請先勾選欲取消的申請紀錄。","top"):console.log(t)}),$(".uploadRemittance, .reuploadRemittance").click(function(e){clearValues(["danger_paymentDate","danger_paymentAmount","danger_last5AccountNo","paymentDate","paymentAmount","last5AccountNo","last5AccountNo","remittancePdf"]);var t,a=$(this);let n=a.data("id");n?(t=dataset_progressCheck.find(e=>e.id==n))?($("#dataId").val(t.id),$("#type").val(t.type),""!=t.isReprint||null!=t.isReprint?$("#paymentPurpose").val("補發"):""!=t.isRenew||null!=t.isRenew?$("#paymentPurpose").val("續約"):$("#paymentPurpose").val(""),$("#itemNum").val(t.itemNum)):console.error("progress data not found for id:",n):console.error("progress ID not found in URL"),a.hasClass("reuploadRemittance")&&(e.preventDefault(),swalConfirm("曾填過匯款通知，要再填一次嗎?","對，我要重新填寫上傳。","不，回到上一步。",function(){$("#remittanceModal").modal("show")}))}),$(".thisRequired").on("input change",function(){checkThisRequiredElements.call(this)}),$("#remittanceSubmit").click(function(e){checkRequiredElements()?checkDangerElements()?console.log("表單資料已送出"):swalToastWarning("請填上正確資料唷！","top"):swalToastWarning("請將必填欄位填上正確資料唷！","top")})});