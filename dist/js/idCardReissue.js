$(function(){populateSelect("idCardCultRoom",selectOptionLocation),$("#typeFirst").prop({checked:!1,disabled:!0}),$("#typeReissue").prop("checked",!0);var a=new URLSearchParams(window.location.search);let d=String(a.get("id"));var e,r,a=session_userData;d?(console.log("ID Card ID:",d),(e=dataset_myIDcardHistory.find(a=>a.id===d))?($("#idCardName").val(e.name),$("#idCardJobTitle").val(e.jobTitle),$("#idCardPhone").val(e.phone),$("#idCardEmail").val(e.email),$("#idCard_Period1").val(e.startDate),r=splitHyphen(e.place),r=changeCultivationRoomToBuilding(r.part1)+"-"+r.part2,$("#idCardCultRoom").val(r),$("#idCardEmergContact").val(e.emergContact),$("#idCardECPhone").val(e.ECPhone),("已開放"==e.library?($("#dontWantReadLibrary").prop("checked",!1),$("#wantReadLibrary")):($("#wantReadLibrary").prop("checked",!1),$("#dontWantReadLibrary"))).prop("checked",!0)):console.error("My Id Card Data not found for id:",d)):console.error("ID Card ID not found in URL"),setMinDateToToday("idCard_Period1"),enforceStartDateFirst("idCard_Period1","idCard_Period2"),$("#idCardCompany_td").text(a.company),$("#idCardResponsiblePerson_td").text(a.responsiblePerson),$("#idCardCompanyPhone_td").text(a.companyPhone),syncInputValue("idCardName","idCardName_td"),syncInputValue("idCardJobTitle","idCardJobTitle_td"),syncInputValue("idCardPhone","idCardPhone_td"),syncInputValue("idCardEmail","idCardEmail_td"),syncInputDate("idCard_Period1","idCard_Period1_Y","idCard_Period1_m","idCard_Period1_D"),syncInputDate("idCard_Period2","idCard_Period2_Y","idCard_Period2_m","idCard_Period2_D"),syncSelectValue("idCardCultRoom","idCardCultRoom_Building","idCardCultRoom_Room"),syncInputValue("idCardEmergContact","ICE_Person"),syncInputValue("idCardECPhone","ICE_Phone"),syncInputRadio("wantReadLibrary","dontWantReadLibrary","wantYes","dontWantYes"),$('input[name="libraryRead"]').on("change",function(){syncInputRadio("wantReadLibrary","dontWantReadLibrary","wantYes","dontWantYes")}),$(".thisRequired").on("input change",function(){checkThisRequiredElements.call(this)}),$("#confirm_idCardApply").click(function(a){checkRequiredElements()?(checkDangerElements()?$("#idCardApp_pdf").modal("show"):swalToastWarning("請填上正確資料唷！","top"),$("#idCardApp_pdf").modal("show")):swalToastWarning("請將所有欄位補上唷！","top")}),$("#printAndSubmit").click(function(a){console.log("表單資料已送出");var d=$("#formIdCardReissue").serializeArray();console.log("表單資料：",JSON.stringify(d,null,2))})});