var dataset_renewContractApp=[{id:"1",uniformNum:"12345678",createDate:"2024-07-01",type:"汽車位",name:"孫小美",phone:"02-81234567",ext:"774",idNumber:"A1234567890",email:"sunxiaomei@example.com",jobTitle:"財務經理",amount:"4,000",adminNote:"要主動提醒",company:"超級棒股份有限公司",building:"新德惠大樓",place:"B1-01",endDate:"2024-06-28",paymentDate:"2024-07-07",status:"待審核"},{id:"2",uniformNum:"34567890",createDate:"2024-06-15",type:"機車位",name:"孫中美",phone:"0912-345678",ext:"",idNumber:"B0987654321",email:"sunzhongmei@example.com",jobTitle:"業務專員",amount:"500",adminNote:"",company:"最佳有限公司",building:"新德惠大樓",place:"B1-05",endDate:"2024-06-13",paymentDate:"2024-06-20",status:"待補件"},{id:"3",uniformNum:"45678901",createDate:"2024-06-25",type:"培育室",company:"幸福股份有限公司",building:"挺生大樓",place:"108",endDate:"2024-06-23",paymentDate:"2024-07-02",status:"通過"},{id:"4",uniformNum:"56789012",createDate:"2024-07-10",type:"汽車位",name:"王小明",phone:"02-83456789",ext:"67",idNumber:"C2345678901",email:"lidanren@example.com",jobTitle:"技術主管",adminNote:"會拖款",amount:"3,800",company:"優秀有限公司",building:"新德惠大樓",place:"B2-08",endDate:"2024-07-05",paymentDate:"2024-07-17",status:"不通過"},{id:"5",uniformNum:"67890123",createDate:"2024-07-03",type:"機車位",name:"陳美麗",phone:"0913-456789",ext:"",idNumber:"D3456789012",email:"wangxiaoming@example.com",jobTitle:"客服經理",amount:"500",adminNote:"",company:"卓越股份有限公司",building:"新德惠大樓",place:"B3-01",endDate:"2024-06-30",paymentDate:"2024-07-09",status:"待審核"},{id:"6",uniformNum:"67890123",createDate:"2024-06-20",type:"培育室",company:"智慧科技有限公司",building:"尚志大樓",place:"B3-10",endDate:"2024-06-19",paymentDate:"2024-06-26",status:"通過"},{id:"7",uniformNum:"78901234",createDate:"2024-06-28",type:"汽車位",name:"黃小虎",ext:"4567",phone:"02-87654321",idNumber:"E4567890123",email:"chenmeili@example.com",jobTitle:"行銷主管",amount:"3,800",adminNote:"哈哈",company:"永續發展股份有限公司",building:"新德惠大樓",place:"B2-05",endDate:"2024-06-27",paymentDate:"2024-07-04",status:"待補件"}],selectOption=[{optigroup:"新德惠大樓",option:"B1-01"},{optigroup:"新德惠大樓",option:"B1-05"},{optigroup:"新德惠大樓",option:"B2-08"},{optigroup:"新德惠大樓",option:"B2-08"},{optigroup:"新德惠大樓",option:"B3-01"},{optigroup:"新德惠大樓",option:"B3-10"},{optigroup:"新德惠大樓",option:"B2-05"},{optigroup:"青創大樓",option:"B4-01"}];$(function(){$("#renewContractAppList").DataTable({...commonSettingsTable,data:dataset_renewContractApp,columns:[{data:"createDate",title:"申請日期"},{data:"type",title:"續約類型"},{data:"company",title:"申請人公司"},{data:"building",title:"大樓"},{data:"place",title:"位置"},{data:"endDate",title:"到期日"},{data:"paymentDate",title:"付款日"},{data:"status",title:"審核進度"},{data:"id",title:"檢閱",render:function(e,t,a){let n="";return'<button type="button" class="btn btn-outline-primary rounded-circle btn-sm" data-bs-toggle="modal" data-bs-target="#'+(n="汽車位"===a.type||"機車位"===a.type?"renewContractParkingSpaceModel":"renewContractRoomModel")+'" data-id="'+e+'"><i class="fa-solid fa-paperclip"></i></button>'},className:"text-center text-nowrap"}],order:[[0,"desc"],[1,"asc"]],columnDefs:[{targets:[1],responsivePriority:1},{targets:[2],responsivePriority:2},{targets:[8],responsivePriority:3},{targets:[3],className:"text-start"},{searchable:!1,orderable:!1,targets:[8]},{className:"text-center",targets:[0,1,3,4,5,6,7]},{className:"text-nowrap",targets:[0,1,3,4,5,6]}],createdRow:function(t,e,a){$("td:eq(8)",t).css("min-width","70px"),[0,5,6].forEach(function(e){$("td:eq("+e+")",t).css("min-width","130px")})}}),$("#renewContractParkingSpaceModel").on("show.bs.modal",function(e){e=$(e.relatedTarget);let t=String(e.data("id"));console.log("psId:",t),$("#updateBtn").off("click");var a,e=dataset_renewContractApp.find(e=>e.id===t);e?(a="",$("#companyName").text(e.company),$("#uniformNum").text(e.uniformNum),$("#createDate").text(e.createDate),$("#name").text(e.name),$("#phoneNum").text(e.phone),$("#ext").text(e.ext),$("#idNumber").text(e.idNumber),$("#email").text(e.email),$("#jobTitle").text(e.jobTitle),"汽車位"===e.type?a="汽車":"機車位"===e.type&&(a="機車"),$("#carType").text(a),$("#parkingSpaceNum").text(e.place),$("#endDate").text(e.endDate),$("#paymentDate").text(e.paymentDate),$("#rate").text(e.amount),$("#adminNote").text(e.adminNote),$("#status").val(e.status)):console.error("parkingSpaceData data not found for id:",t),"通過"===e.status||"不通過"===e.status?($(".changeInput_items").off("click"),$(".changeNumber_items").off("click"),$(".changeDate_items").off("click"),$(".changeMoney_items").off("click"),$(".changePhone_items").off("click"),$(".changeEmail_items").off("click"),$(".changeRadio_items").off("click"),$(".changeSelect_items").off("click"),theseRemoveClass(["changeInput_items"],["name","idNumber","jobTitle","parkingSpaceNum","adminNote"]),theseRemoveClass(["changeNumber_items"],["ext"]),theseRemoveClass(["changeDate_items"],["endDate","paymentDate"]),theseRemoveClass(["changeMoney_items"],["rate"]),theseRemoveClass(["changePhone_items"],["phoneNum"]),theseRemoveClass(["changeEmail_items"],["email"]),theseRemoveClass(["changeRadio_items"],["carType"]),theseRemoveClass(["changeSelect_items"],["parkingSpaceNum"]),theseAddClass(["readOnly"],["name","idNumber","jobTitle","parkingSpaceNum","adminNote","ext","endDate","paymentDate","rate","phoneNum","email","carType"]),$("#updateBtn").hide(),$("#supplementaryFilesBox").hide(),$("#status").hide(),$("#statusText").show().text(e.status)):(theseAddClass(["changeInput_items"],["name","idNumber","jobTitle","adminNote"]),theseAddClass(["changeNumber_items"],["ext"]),theseAddClass(["changeDate_items"],["endDate","paymentDate"]),theseAddClass(["changeMoney_items"],["rate"]),theseAddClass(["changePhone_items"],["phoneNum"]),theseAddClass(["changeEmail_items"],["email"]),theseAddClass(["changeRadio_items"],["carType"]),theseAddClass(["changeSelect_items"],["parkingSpaceNum"]),theseRemoveClass(["readOnly"],["name","idNumber","jobTitle","parkingSpaceNum","adminNote","ext","endDate","paymentDate","rate","phoneNum","email","carType"]),CustomInputHandlers.init(),$("#updateBtn").show(),$("#supplementaryFilesBox").show(),$("#status").show(),$("#statusText").hide()),$("#updateBtn").on("click",function(){(updatedData={}).id=t,updatedData.companyName=$("#companyName").text(),updatedData.uniformNum=$("#uniformNum").text(),updatedData.createDate=$("#createDate").text(),updatedData.name=$("#name").text(),updatedData.phoneNum=$("#phoneNum").text(),updatedData.ext=$("#ext").text(),updatedData.idNumber=$("#idNumber").text(),updatedData.email=$("#email").text(),updatedData.jobTitle=$("#jobTitle").text(),updatedData.carType=$("#carType").text(),updatedData.parkingSpaceNum=$("#parkingSpaceNum").text(),updatedData.endDate=$("#endDate").text(),updatedData.paymentDate=$("#paymentDate").text(),updatedData.rate=$("#rate").text(),updatedData.adminNote=$("#adminNote").text(),updatedData.status=$("#status").val(),console.log(updatedData)})})});