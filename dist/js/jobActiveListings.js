$(function(){let t=$("#jobActiveList").DataTable({...commonSettingsTable,data:dataset_jobActiveListings,columns:[{data:"id",title:'<i class="fa-regular fa-square-check"></i>',render:function(t){return'<input type="checkbox" class="form-check-input border-primary job-checkbox" value='+t+">"},className:"text-center"},{data:"createDate",title:"刊登日期"},{data:"company",title:"招聘公司"},{data:"deptOf",title:"科系限制"},{data:"jobTitle",title:"職務名稱"},{data:"jobEmployment",title:'工作<br class="d-none d-lg-black">性質'},{data:"jobTime",title:"工作時間"},{data:"applicationDeadline",title:"截止日期"},{data:"id",title:"詳情",render:function(t){return'<button type="button" class="btn btn-outline-primary rounded-circle btn-sm" data-bs-toggle="modal" data-bs-target="#jobDetailsModal" data-id="'+t+'"><i class="fa-solid fa-info px-1"></i></button>'}},{data:"id",title:"修改",render:function(t){return'<a class="btn btn-outline-primary rounded-circle btn-sm oneWord" href="/Jobs/Edit/'+t+'"><i class="fa-solid fa-wrench"></i></a>'}}],order:[[1,"desc"],[0,"desc"]],columnDefs:[{targets:[0],responsivePriority:1},{targets:[3],responsivePriority:2},{targets:[4],responsivePriority:3},{searchable:!1,orderable:!1,targets:[0,8,9]},{className:"text-nowrap",targets:[0,1,6,7]},{className:"text-lg-center",targets:[1,5,6,7,8]}],createdRow:function(e,t,o){[0,8,9].forEach(function(t){$("td:eq("+t+")",e).css("max-width","70px")}),[1,6,7].forEach(function(t){$("td:eq("+t+")",e).css("min-width","130px").css("font-size",".95em")})}});$("#jobDetailsModal").on("show.bs.modal",function(t){t=$(t.relatedTarget);let e=String(t.data("id"));t=dataset_jobActiveListings.find(t=>t.id===e);t?($("#companyName").text(t.company),$("#companyDescription").text(t.companyDescription),$("#jobTitle").text(t.jobTitle),$("#jobEmployment").text(t.jobEmployment),$("#deptOf").text(t.deptOf),$("#jobTime").text(t.jobTime),$("#vacationSystem").text(t.vacationSystem),$("#salaryDetails").text(t.salaryStyle+"："+t.salaryAmount),$("#jobContent").html(t.jobContent),$("#jobCondition").html(t.jobCondition),$("#jobConnect").html(t.jobConnect),$("#jobLocation").html(t.jobLocation),$("#applicationDeadline").text(t.applicationDeadline)):console.error("Job data not found for id:",e)}),$("#deleteTheseJobs").click(function(){let e=[];t.rows().every(function(){var t=this.node();$(t).find(".job-checkbox").prop("checked")&&(t=this.data(),e.push(t.id))}),0===e.length?swalToastWarning("請先勾選欲刪除的招聘職缺。","top"):(console.log(e),$.ajax({url:deleteUrl,type:"POST",contentType:"application/json",data:JSON.stringify(e),success:function(t){console.log("Delete request successful",t),swalToastSuccess(t.message,"top"),setTimeout(function(){location.reload()},2300)},error:function(t,e,o){console.error("Error deleting jobs",o),swalToastWarning("刪除職缺時發生錯誤。","top")}}))})});