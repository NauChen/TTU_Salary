$(function(){let e=$("#myIDcardList").DataTable({...commonSettingsProvision,layout:{topStart:function(){var e=document.createElement("div");return e.innerHTML='<h6 class="fw-bold"><i class="fa-solid fa-circle-exclamation mx-1"></i>識別證停用後，需歸還至研發處。</h6>',e}},data:dataset_myIDcardHistory,columns:[{data:"id",title:'<i class="fa-regular fa-square-check"></i>',render:function(e,t,a,r){return"X"==a.remark||"已選停用，請至研發處歸還。"==a.remark||"不通過，可洽研發處。"==a.remark?"":'<input type="checkbox" class="form-check-input border-primary idCard-checkbox" value='+e+">"}},{data:"createDate",title:"申請日期"},{data:"place",title:"培育室位置"},{data:"name",title:"姓名"},{data:"jobTitle",title:"職稱"},{data:"library",title:"閱覽<br class='d-none d-lg-block'>圖書館"},{data:"print",title:"補發<br class='d-none d-lg-block'>次數"},{data:"remark",title:"備註"},{data:"id",title:"申請<br class='d-none d-lg-block'>補發",render:function(e,t,a){return"申請中"!=a.remark&&"X"!=a.remark&&"已選停用，請至研發處歸還。"!=a.remark&&"不通過，可洽研發處。"!=a.remark?'<a class="btn btn-outline-primary rounded-circle noOutline" href="../ID_Card/Reissue/'+e+'"><i class="fa-regular fa-face-sad-tear"></i></a>':""}},{data:"remark",visible:!1,render:function(e,t,a){return"已選停用，請至研發處歸還。"==e?"0":"申請中"==e?"1":"X"==e?"9":"6"}}],order:[[9,"asc"]],columnDefs:[{targets:[0],responsivePriority:1},{targets:[2],responsivePriority:2},{targets:[3],responsivePriority:3},{searchable:!1,orderable:!1,targets:[0,8]},{className:"text-lg-center",targets:[0,1,3,4,5,6,8]},{className:"text-nowrap",targets:[0,1,3,4,5,6]}],createdRow:function(t,e,a){"X"!=e.remark&&"不通過，可洽研發處。"!=e.remark||$("td",t).css("color","#999"),[1].forEach(function(e){$("td:eq("+e+")",t).css("min-width","130px")}),$("td:eq(8)",t).css("max-width","70px")}});$("#deleteTheseIdCard").click(function(){let t=[];e.rows().every(function(){var e=this.node();$(e).find(".idCard-checkbox").prop("checked")&&(e=this.data(),t.push(e.id))}),0===t.length?swalToastWarning("請先勾選欲停用的識別證。","top"):(console.log(t),$.ajax({url:deleteUrl,type:"POST",contentType:"application/json",data:JSON.stringify(t),success:function(e){swalToastSuccess(e.message,"top"),setTimeout(function(){location.reload()},2300)},error:function(e,t,a){console.error("Error deleting jobs",a),swalToastWarning("刪除識別證時發生錯誤。","top")}}))})});